let state = { step: 0, hearts: 3 };

function adventure(input) {
  if (state.step === 0) {
    state.step = 1;
    return "يبدو أنك تريد دخول مكان مجهول. هل أنت متأكد؟ (نعم/لا)";
  }
  if (state.step === 1) {
    if (input === "نعم") {
      state.step = 2;
      return "دخلت مغامرة! وجدت مكان مهجور مخيف. صديقك يقول لا تقترب، وصديق آخر يصر على الدخول. هل تدخل؟ (نعم/لا)";
    } else {
      return "يبدو أنك استسلمت بسرعة! اكتب 'كنز' لتبدأ من جديد.";
    }
  }
  if (state.step === 2) {
    if (input === "نعم") {
      state.step = 3;
      return "دخلت المنزل ووجدت قبو. هل تتعمق أكثر؟ (نعم/لا)";
    } else {
      return "ذهبت لمكان آخر، لكن لم تجد شيئًا. اكتب 'كنز' لتبدأ مغامرة جديدة.";
    }
  }
  if (state.step === 3) {
    if (input === "نعم") {
      state.step = 4;
      return "هاجمك مصاصو دماء! حل المعادلة: 6+4 خلال 5 ثواني.";
    } else {
      return "خرجت بأمان، لكن فاتك الكنز! اكتب 'كنز' لتعيد التجربة.";
    }
  }
  if (state.step === 4) {
    if (input === "10") {
      return "هربت من الوحوش! مبروك، كملت المغامرة! اكتب 'كنز' لتبدأ مغامرة جديدة.";
    } else {
      state.hearts--;
      if (state.hearts > 0) {
        return `هاجمتك الوحوش! لا يزال لديك ${state.hearts} قلوب. اكتب 'كمل' لتكمل.`;
      } else {
        state.step = 0;
        state.hearts = 3;
        return "انتهت اللعبة! استُنفذت قلوبك. اكتب 'كنز' لتبدأ من جديد.";
      }
    }
  }
  return "اكتب 'كنز' لتبدأ مغامرة جديدة.";
}